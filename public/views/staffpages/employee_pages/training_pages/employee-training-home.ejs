<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trainings & Development</title>
    <link rel="stylesheet" href="/css/sidebar.css">
    <link rel="stylesheet" href="/css/recordsandperformancetracker.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Import Inter font */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');

        /* Main content styling */
        .main-content {
            margin-left: 270px;
            padding: 20px;
            font-family: 'Inter', sans-serif;
        }

        /* Dashboard header */
        .dashboard-header {
            margin-bottom: 25px;
        }

        .dashboard-header h2 {
            margin-bottom: 10px;
            color: #333;
            font-size: 24px;
        }

        .dashboard-header p {
            color: #666;
            font-size: 0.95rem;
            max-width: 800px;
        }

        /* Action Required Alert */
        .action-required {
            background-color: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 15px 20px;
            margin-bottom: 30px;
            border-radius: 8px;
        }

        .action-required-text {
            color: #92400e;
            font-weight: 500;
            margin: 0;
            font-size: 14px;
        }

        .action-required-highlight {
            color: #d97706;
            font-weight: 600;
        }

        /* Tabs styling */
        .tabs-container {
            width: 100%;
            margin-bottom: 30px;
        }

        .tabs-nav {
            display: flex;
            border-bottom: 2px solid #eee;
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .tab-button {
            padding: 12px 20px;
            background-color: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            color: #666;
            transition: all 0.3s ease;
            margin-right: 10px;
            display: flex;
            align-items: center;
        }

        .tab-button i {
            margin-right: 8px;
            font-size: 16px;
        }

        .tab-button.active {
            color: #07ACB9;
            border-bottom: 3px solid #07ACB9;
            background-color: #f8fdfd;
        }

        .tab-button:hover:not(.active) {
            color: #124A5C;
            border-bottom: 3px solid #ddd;
        }

        .tab-content {
            display: none;
            padding: 25px 0;
            animation: fadeIn 0.5s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Card styling */
        .card {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            padding: 20px;
            margin-bottom: 25px;
        }

        .card-header {
            margin-bottom: 15px;
            border-bottom: 1px solid #f0f0f0;
            padding-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-header h3 {
            margin: 0;
            font-size: 1.2rem;
            color: #333;
        }

        /* Progress categories grid */
        .progress-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .progress-category {
            background-color: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .progress-category:hover {
            border-color: #07ACB9;
            transform: translateY(-2px);
        }

        .progress-category h3 {
            margin: 0 0 10px 0;
            font-size: 1.1rem;
            color: #334155;
            font-weight: 600;
        }

        .progress-category .count {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .progress-category.in-progress {
            border-color: #3b82f6;
            background-color: #eff6ff;
        }

        .progress-category.in-progress .count {
            color: #3b82f6;
        }

        .progress-category.completed {
            border-color: #10b981;
            background-color: #ecfdf5;
        }

        .progress-category.completed .count {
            color: #10b981;
        }

        .progress-category.overdue {
            border-color: #ef4444;
            background-color: #fef2f2;
        }

        .progress-category.overdue .count {
            color: #ef4444;
        }

        /* Courses header actions */
        .courses-header-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        /* Add request button styling */
        .add-request-btn {
            background-color: #124A5C;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
        }

        .add-request-btn:hover {
            background-color: #0d3c4a;
            transform: translateY(-2px);
        }

        /* Modal styling */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }

        .modal-overlay.show {
            display: flex;
        }

        .modal-content {
            background-color: white;
            border-radius: 16px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #334155;
            margin: 0;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            color: #374151;
            margin-bottom: 8px;
        }

        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.2s ease;
            box-sizing: border-box;
        }

        .form-input:focus {
            outline: none;
            border-color: #07ACB9;
            box-shadow: 0 0 0 3px rgba(7, 172, 185, 0.1);
        }

        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 8px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 8px 12px;
            border: 1px solid #e2e8f0;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 14px;
        }

        .checkbox-item:hover {
            border-color: #07ACB9;
            background-color: #f0fdff;
        }

        .checkbox-item.selected {
            background-color: #07ACB9;
            color: white;
            border-color: #07ACB9;
        }

        .checkbox-item input[type="checkbox"] {
            display: none;
        }

        .date-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .confirmation-message {
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 16px;
            margin: 20px 0;
            font-size: 14px;
            color: #64748b;
            text-align: center;
        }

        .modal-actions {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-top: 25px;
        }

        .btn-secondary {
            background-color: #f8fafc;
            color: #64748b;
            border: 1px solid #e2e8f0;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .btn-secondary:hover {
            background-color: #e2e8f0;
        }

        .btn-primary {
            background-color: #124A5C;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .btn-primary:hover {
            background-color: #0d3c4a;
        }

        .filter-dropdown {
            position: relative;
        }

        .filter-button {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 15px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            background-color: #fff;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s ease;
        }

        .filter-button:hover {
            border-color: #07ACB9;
        }

        .filter-dropdown-content {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background-color: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            display: none;
            padding: 10px;
            min-width: 150px;
        }

        .filter-dropdown.open .filter-dropdown-content {
            display: block;
        }

        .filter-option {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            cursor: pointer;
            border-radius: 4px;
            font-size: 14px;
        }

        .filter-option:hover {
            background-color: #f8fafc;
        }

        .filter-option input[type="checkbox"] {
            margin: 0;
        }

        /* Active filters display */
        .active-filters {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-left: 10px;
        }

        .filter-tag {
            background-color: #07ACB9;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .filter-tag .remove-filter {
            cursor: pointer;
            font-size: 10px;
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            width: 14px;
            height: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Courses Grid */
        .courses-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .course-card {
            background-color: #f8fafc;
            border: none;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .course-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .course-card.enrolled {
            border-left: 4px solid #07ACB9;
        }

        .course-card.completed {
            border-left: 4px solid #10b981;
        }

        .course-card.overdue {
            border-left: 4px solid #ef4444;
        }

        .course-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .course-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #334155;
            margin: 0;
            flex: 1;
        }

        .course-badges {
            display: flex;
            flex-direction: column;
            gap: 5px;
            margin-left: 10px;
        }

        .course-status {
            display: inline-flex;
            align-items: center;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
        }

        .course-status.active {
            background-color: #10b981;
            color: white;
        }

        .course-status.inactive {
            background-color: #6b7280;
            color: white;
        }

        .course-status.enrolled {
            background-color: #3b82f6;
            color: white;
        }

        .course-type {
            display: inline-flex;
            align-items: center;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
            background-color: #e5e7eb;
            color: #374151;
        }

        .course-type.online {
            background-color: #dbeafe;
            color: #1e40af;
        }

        .course-type.onsite {
            background-color: #fef3c7;
            color: #d97706;
        }

        .course-type.required {
            background-color: #fecaca;
            color: #dc2626;
        }

        .course-description {
            color: #64748b;
            font-size: 14px;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .enroll-btn {
            background-color: #07ACB9;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .enroll-btn:hover {
            background-color: #059ca4;
        }

        /* Progress bar styling - matching the performance dashboard */
        .course-progress {
            background-color: #f2f2f2;
            height: 20px;
            border-radius: 4px;
            overflow: hidden;
            margin: 15px 0 10px 0;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background-color: #07ACB9;
            border-radius: 4px;
            transition: width 0.3s ease-in-out;
            position: relative;
            text-align: center;
            color: #fff;
            line-height: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        /* Upload button styling */
        .upload-certificate-btn {
            background-color: #124A5C;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .upload-certificate-btn:hover {
            background-color: #0d3c4a;
            transform: translateY(-2px);
        }

        /* View toggle buttons */
        .view-toggle {
            display: flex;
            gap: 10px;
        }

        .view-btn {
            padding: 8px 16px;
            border: 1px solid #e2e8f0;
            background-color: #f8fafc;
            color: #64748b;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s ease;
        }

        .view-btn.active {
            background-color: #124A5C;
            color: white;
            border-color: #124A5C;
        }

        .view-btn:hover:not(.active) {
            border-color: #07ACB9;
            color: #07ACB9;
        }

        /* Certificates grid */
        .certificates-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .certificate-item {
            background-color: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .certificate-item:hover {
            border-color: #07ACB9;
            background-color: #f0fdff;
        }

        .certificate-item.uploaded {
            border-color: #10b981;
            background-color: #ecfdf5;
        }

        .certificate-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
        }

        .certificate-icon {
            background-color: #07ACB9;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .certificate-title {
            font-weight: 600;
            color: #334155;
            font-size: 1rem;
            margin: 0;
        }

        .certificate-details {
            margin: 10px 0;
            color: #64748b;
            font-size: 14px;
            line-height: 1.5;
        }

        .certificate-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e2e8f0;
            font-size: 12px;
            color: #6b7280;
        }

        .certificate-placeholder {
            color: #94a3b8;
            font-style: italic;
            text-align: center;
        }

        /* Progress sections styling */
        .progress-section {
            margin-bottom: 40px;
        }

        .progress-section .section-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
            display: flex;
            align-items: center;
        }

        /* List view styling for progress sections */
        .courses-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .course-list-item {
            background-color: #fff;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 16px 20px;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .course-list-item:hover {
            border-color: #07ACB9;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .course-list-item.enrolled {
            border-left: 4px solid #3b82f6;
        }

        .course-list-item.completed {
            border-left: 4px solid #10b981;
        }

        .course-list-item.overdue {
            border-left: 4px solid #ef4444;
        }

        .course-list-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .course-list-title {
            font-size: 1rem;
            font-weight: 600;
            color: #334155;
            margin: 0;
        }

        .course-list-details {
            font-size: 14px;
            color: #64748b;
            line-height: 1.4;
        }

        .course-list-meta {
            display: flex;
            align-items: center;
            gap: 15px;
            min-width: 250px;
        }

        .course-list-badges {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
        }

        .course-list-badge {
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
        }

        .course-list-badge.online {
            background-color: #dbeafe;
            color: #1e40af;
        }

        .course-list-badge.onsite {
            background-color: #fef3c7;
            color: #d97706;
        }

        .course-list-badge.required {
            background-color: #fecaca;
            color: #dc2626;
        }

        .course-list-progress {
            width: 120px;
            text-align: right;
        }

        .course-list-progress-bar {
            width: 100%;
            height: 6px;
            background-color: #f2f2f2;
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 4px;
        }

        .course-list-progress-fill {
            height: 100%;
            background-color: #07ACB9;
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        .course-list-progress-text {
            font-size: 12px;
            color: #64748b;
            font-weight: 500;
        }

        /* Certificates list styling */
        .certificates-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 20px;
        }

        .certificate-list-item {
            background-color: #fff;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 16px 20px;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .certificate-list-item:hover {
            border-color: #07ACB9;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .certificate-list-item.uploaded {
            border-left: 4px solid #10b981;
        }

        .certificate-list-info {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .certificate-list-icon {
            background-color: #07ACB9;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .certificate-list-details {
            flex: 1;
        }

        .certificate-list-title {
            font-size: 1rem;
            font-weight: 600;
            color: #334155;
            margin: 0 0 4px 0;
        }

        .certificate-list-meta {
            font-size: 14px;
            color: #64748b;
            line-height: 1.4;
        }

        .certificate-list-actions {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .certificate-list-id {
            font-size: 12px;
            color: #6b7280;
            font-family: monospace;
        }

        .certificate-download {
            color: #07ACB9;
            cursor: pointer;
            font-size: 1.1rem;
            padding: 4px;
            border-radius: 4px;
            transition: background-color 0.2s ease;
        }

        .certificate-download:hover {
            background-color: #f0fdff;
        }

        /* Show more styling */
        .show-more-item {
            border: 2px dashed #cbd5e1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            color: #64748b;
        }

        .show-more-item:hover {
            border-color: #07ACB9;
            background-color: #f0fdff;
        }

        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .main-content {
                margin-left: 0;
                padding: 15px;
            }

            .progress-categories {
                grid-template-columns: 1fr;
            }

            .card-header {
                flex-direction: column;
                gap: 15px;
                align-items: stretch;
            }

            .filter-section {
                flex-direction: column;
                align-items: stretch;
            }

            .courses-grid {
                grid-template-columns: 1fr;
            }

            .course-header {
                flex-direction: column;
                gap: 10px;
            }

            .course-badges {
                margin-left: 0;
                flex-direction: row;
            }
        }

         /* Searchable dropdown styling */
        .dropdown-container {
            position: relative;
        }

        .dropdown-input {
            width: 100%;
            padding: 12px 40px 12px 16px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.2s ease;
            box-sizing: border-box;
            cursor: pointer;
        }

        .dropdown-input:focus {
            outline: none;
            border-color: #07ACB9;
            box-shadow: 0 0 0 3px rgba(7, 172, 185, 0.1);
        }

        .dropdown-icon {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #64748b;
            pointer-events: none;
            transition: transform 0.2s ease;
        }

        .dropdown-container.open .dropdown-icon {
            transform: translateY(-50%) rotate(180deg);
        }

        .dropdown-list {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background-color: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            display: none;
            max-height: 200px;
            overflow-y: auto;
        }

        .dropdown-container.open .dropdown-list {
            display: block;
        }

        .dropdown-item {
            padding: 12px 16px;
            cursor: pointer;
            border-bottom: 1px solid #f1f5f9;
            transition: background-color 0.2s ease;
        }

        .dropdown-item:last-child {
            border-bottom: none;
        }

        .dropdown-item:hover {
            background-color: #f8fafc;
        }

        .dropdown-item.selected {
            background-color: #07ACB9;
            color: white;
        }

        .dropdown-item-title {
            font-weight: 500;
            margin-bottom: 2px;
        }

        .dropdown-item-meta {
            font-size: 12px;
            color: #64748b;
        }

        .dropdown-item.selected .dropdown-item-meta {
            color: rgba(255, 255, 255, 0.8);
        }

        .no-results {
            padding: 16px;
            text-align: center;
            color: #64748b;
            font-style: italic;
        }

        .loading {
            padding: 16px;
            text-align: center;
            color: #64748b;
        }

        /* Improved skills and objectives display */
        .skills-objectives-container {
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 16px;
            margin-top: 10px;
        }

        .skills-objectives-container.empty {
            display: none;
        }

        .section-title {
            font-size: 14px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
        }

        .section-title i {
            margin-right: 8px;
            color: #07ACB9;
        }

        .tags-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 16px;
        }

        .tag {
            background-color: #07ACB9;
            color: white;
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 12px;
            font-weight: 500;
            display: flex;
            align-items: center;
        }

        .tag.objective {
            background-color: #3b82f6;
        }

        .tag.skill {
            background-color: #10b981;
        }

        .date-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .confirmation-message {
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 16px;
            margin: 20px 0;
            font-size: 14px;
            color: #64748b;
            text-align: center;
        }

        .modal-actions {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-top: 25px;
        }

        .btn-secondary {
            background-color: #f8fafc;
            color: #64748b;
            border: 1px solid #e2e8f0;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .btn-secondary:hover {
            background-color: #e2e8f0;
        }

        .btn-primary {
            background-color: #124A5C;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .btn-primary:hover {
            background-color: #0d3c4a;
        }

        .btn-primary:disabled {
            background-color: #94a3b8;
            cursor: not-allowed;
        }

        /* Demo button */
        .add-request-btn {
            background-color: #124A5C;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 20px;
        }

    </style>
</head>
<body>
    <%- include('../../../partials/employee_partials') %>
    
    <!-- Main content area -->
    <div class="main-content">
        <div class="dashboard-header">
            <h2>Trainings</h2>
            <p>Access your training programs, track your learning progress, and manage your professional development certifications.</p>
        </div>

        <!-- Action Required Alert -->
        <div class="action-required">
            <p class="action-required-text">
                <span class="action-required-highlight">Action Required:</span> 
                [SETTING OF 2025 MID-YEAR/FINAL YEAR TRAININGS] Please set the Mid-Year/Final-Year Individual Development Plan (IDP) in the Records and Performance Tracker before adding a new entry.
            </p>
        </div>

        <!-- Tabs Container -->
        <div class="tabs-container">
            <ul class="tabs-nav">
                <li><button class="tab-button active" data-tab="progress-tab">
                    <i class="fas fa-chart-line"></i> Training Progress
                </button></li>
                <li><button class="tab-button" data-tab="courses-tab">
                    <i class="fas fa-graduation-cap"></i> All Courses
                </button></li>
                <li><button class="tab-button" data-tab="certificates-tab">
                    <i class="fas fa-certificate"></i> Certificates
                </button></li>
            </ul>

            <!-- Tab Content -->
            <div class="tab-contents">
                <!-- Training Progress Tab -->
                <div id="progress-tab" class="tab-content active">
                    <div class="card">
                        <div class="card-header">
                            <h3>Training Progress Overview</h3>
                            <div class="view-toggle">
                                <button class="view-btn active">List View</button>
                                <button class="view-btn">Calendar View</button>
                            </div>
                        </div>
                        <p>Track your training progress across different categories. Click on a category to filter your training courses below.</p>
                        
                        <div class="progress-categories">
                            <div class="progress-category in-progress" data-filter="in-progress">
                                <div class="count">3</div>
                                <h3>In Progress</h3>
                                <p>Currently ongoing training sessions</p>
                            </div>
                            <div class="progress-category completed" data-filter="completed">
                                <div class="count">8</div>
                                <h3>Completed</h3>
                                <p>Successfully finished trainings</p>
                            </div>
                            <div class="progress-category overdue" data-filter="overdue">
                                <div class="count">1</div>
                                <h3>Overdue</h3>
                                <p>Training sessions past due date</p>
                            </div>
                        </div>

                        <!-- In Progress Courses Section -->
                        <div class="progress-section" id="in-progress-section">
                            <h4 class="section-title">
                                <i class="fas fa-play-circle" style="color: #3b82f6; margin-right: 8px;"></i>
                                In Progress Courses (3)
                            </h4>
                            <div class="courses-list">
                                <div class="course-list-item enrolled">
                                    <div class="course-list-info">
                                        <h5 class="course-list-title">Leadership Development Program</h5>
                                        <div class="course-list-details">
                                            5 weeks • 20 lessons • Dr. Sarah Johnson
                                        </div>
                                    </div>
                                    <div class="course-list-meta">
                                        <div class="course-list-badges">
                                            <span class="course-list-badge online">Online</span>
                                        </div>
                                        <div class="course-list-progress">
                                            <div class="course-list-progress-bar">
                                                <div class="course-list-progress-fill" style="width: 75%;"></div>
                                            </div>
                                            <div class="course-list-progress-text">15/20 lessons</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="course-list-item enrolled">
                                    <div class="course-list-info">
                                        <h5 class="course-list-title">Safety and Compliance Training</h5>
                                        <div class="course-list-details">
                                            2 days • 8 modules • Training Center B
                                        </div>
                                    </div>
                                    <div class="course-list-meta">
                                        <div class="course-list-badges">
                                            <span class="course-list-badge onsite">Onsite</span>
                                            <span class="course-list-badge required">Required</span>
                                        </div>
                                        <div class="course-list-progress">
                                            <div class="course-list-progress-bar">
                                                <div class="course-list-progress-fill" style="width: 60%;"></div>
                                            </div>
                                            <div class="course-list-progress-text">5/8 modules</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="course-list-item enrolled">
                                    <div class="course-list-info">
                                        <h5 class="course-list-title">Advanced Excel Training</h5>
                                        <div class="course-list-details">
                                            3 weeks • 15 lessons • Ms. Jennifer Lee
                                        </div>
                                    </div>
                                    <div class="course-list-meta">
                                        <div class="course-list-badges">
                                            <span class="course-list-badge online">Online</span>
                                        </div>
                                        <div class="course-list-progress">
                                            <div class="course-list-progress-bar">
                                                <div class="course-list-progress-fill" style="width: 40%;"></div>
                                            </div>
                                            <div class="course-list-progress-text">6/15 lessons</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Completed Courses Section -->
                        <div class="progress-section" id="completed-section">
                            <h4 class="section-title">
                                <i class="fas fa-check-circle" style="color: #10b981; margin-right: 8px;"></i>
                                Completed Courses (8)
                            </h4>
                            <div class="courses-list">
                                <div class="course-list-item completed">
                                    <div class="course-list-info">
                                        <h5 class="course-list-title">Technical Skills Enhancement</h5>
                                        <div class="course-list-details">
                                            3 weeks • 12 lessons • Completed: March 15, 2025
                                        </div>
                                    </div>
                                    <div class="course-list-meta">
                                        <div class="course-list-badges">
                                            <span class="course-list-badge online">Online</span>
                                            <span class="course-list-badge required">Required</span>
                                        </div>
                                        <div class="course-list-progress">
                                            <div class="course-list-progress-bar">
                                                <div class="course-list-progress-fill" style="width: 100%;"></div>
                                            </div>
                                            <div class="course-list-progress-text">Complete</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="course-list-item completed">
                                    <div class="course-list-info">
                                        <h5 class="course-list-title">Communication Excellence</h5>
                                        <div class="course-list-details">
                                            1 day • 4 sessions • Completed: March 10, 2025
                                        </div>
                                    </div>
                                    <div class="course-list-meta">
                                        <div class="course-list-badges">
                                            <span class="course-list-badge onsite">Onsite</span>
                                        </div>
                                        <div class="course-list-progress">
                                            <div class="course-list-progress-bar">
                                                <div class="course-list-progress-fill" style="width: 100%;"></div>
                                            </div>
                                            <div class="course-list-progress-text">Complete</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="course-list-item completed">
                                    <div class="course-list-info">
                                        <h5 class="course-list-title">Time Management Essentials</h5>
                                        <div class="course-list-details">
                                            2 weeks • 8 lessons • Completed: February 28, 2025
                                        </div>
                                    </div>
                                    <div class="course-list-meta">
                                        <div class="course-list-badges">
                                            <span class="course-list-badge online">Online</span>
                                        </div>
                                        <div class="course-list-progress">
                                            <div class="course-list-progress-bar">
                                                <div class="course-list-progress-fill" style="width: 100%;"></div>
                                            </div>
                                            <div class="course-list-progress-text">Complete</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="course-list-item completed">
                                    <div class="course-list-info">
                                        <h5 class="course-list-title">Customer Service Excellence</h5>
                                        <div class="course-list-details">
                                            1 week • 6 modules • Completed: February 15, 2025
                                        </div>
                                    </div>
                                    <div class="course-list-meta">
                                        <div class="course-list-badges">
                                            <span class="course-list-badge online">Online</span>
                                            <span class="course-list-badge required">Required</span>
                                        </div>
                                        <div class="course-list-progress">
                                            <div class="course-list-progress-bar">
                                                <div class="course-list-progress-fill" style="width: 100%;"></div>
                                            </div>
                                            <div class="course-list-progress-text">Complete</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Show more link for remaining completed courses -->
                                <div class="show-more-item" onclick="showMoreCompleted()">
                                    <div>
                                        <i class="fas fa-plus-circle" style="font-size: 1.2rem; margin-right: 8px;"></i>
                                        Show 4 more completed courses
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Overdue Courses Section -->
                        <div class="progress-section" id="overdue-section">
                            <h4 class="section-title">
                                <i class="fas fa-exclamation-circle" style="color: #ef4444; margin-right: 8px;"></i>
                                Overdue Courses (1)
                            </h4>
                            <div class="courses-list">
                                <div class="course-list-item overdue">
                                    <div class="course-list-info">
                                        <h5 class="course-list-title">Project Management Fundamentals</h5>
                                        <div class="course-list-details">
                                            4 weeks • 16 lessons • <strong style="color: #ef4444;">Deadline: March 1, 2025</strong>
                                        </div>
                                    </div>
                                    <div class="course-list-meta">
                                        <div class="course-list-badges">
                                            <span class="course-list-badge online">Online</span>
                                            <span class="course-list-badge required">Required</span>
                                        </div>
                                        <div class="course-list-progress">
                                            <div class="course-list-progress-bar">
                                                <div class="course-list-progress-fill" style="width: 25%;"></div>
                                            </div>
                                            <div class="course-list-progress-text">4/16 lessons</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- All Courses Tab -->
                <div id="courses-tab" class="tab-content">
                    <div class="card">
                        <div class="card-header">
                            <h3>All Training Courses</h3>
                            <div class="courses-header-actions">
                                <div class="filter-section">
                                    <div class="filter-dropdown" id="filter-dropdown">
                                        <div class="filter-button" onclick="toggleFilterDropdown()">
                                            <i class="fas fa-filter"></i>
                                            <span>Filters</span>
                                            <i class="fas fa-chevron-down"></i>
                                        </div>
                                        <div class="filter-dropdown-content">
                                            <div class="filter-option">
                                                <input type="checkbox" id="filter-online" value="online" onchange="updateFilters()">
                                                <label for="filter-online">Online</label>
                                            </div>
                                            <div class="filter-option">
                                                <input type="checkbox" id="filter-onsite" value="onsite" onchange="updateFilters()">
                                                <label for="filter-onsite">Onsite</label>
                                            </div>
                                            <div class="filter-option">
                                                <input type="checkbox" id="filter-required" value="required" onchange="updateFilters()">
                                                <label for="filter-required">Required</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="active-filters" id="active-filters"></div>
                                </div>
                                <button class="add-request-btn" onclick="openTrainingRequestModal()">
                                    <i class="fas fa-plus"></i>
                                    Request New Training
                                </button>
                            </div>
                        </div>
                        <p>Browse all available training courses that you can enroll in. Your current enrolled and completed courses can be found in the Training Progress tab.</p>
                        
                        <div class="courses-grid">
                            <!-- Available Course 1 -->
                            <div class="course-card" data-status="available" data-type="online">
                                <div class="course-header">
                                    <h3 class="course-title">Advanced Data Analytics</h3>
                                    <div class="course-badges">
                                        <span class="course-type online">Online</span>
                                    </div>
                                </div>
                                <div class="course-description">
                                    Professional Development<br>
                                    Duration: 6 weeks • 24 lessons<br>
                                    Instructor: Prof. Michael Chen
                                </div>
                                <button class="enroll-btn">Enroll Now</button>
                            </div>

                            <!-- Available Course 2 -->
                            <div class="course-card" data-status="available" data-type="onsite">
                                <div class="course-header">
                                    <h3 class="course-title">Communication Excellence Workshop</h3>
                                    <div class="course-badges">
                                        <span class="course-type onsite">Onsite</span>
                                    </div>
                                </div>
                                <div class="course-description">
                                    Soft Skills Development<br>
                                    Duration: 1 day • 4 sessions<br>
                                    Location: Conference Room A
                                </div>
                                <button class="enroll-btn">Enroll Now</button>
                            </div>

                            <!-- Available Course 3 -->
                            <div class="course-card" data-status="available" data-type="online required">
                                <div class="course-header">
                                    <h3 class="course-title">Cybersecurity Awareness</h3>
                                    <div class="course-badges">
                                        <span class="course-type online">Online</span>
                                        <span class="course-type required">Required</span>
                                    </div>
                                </div>
                                <div class="course-description">
                                    Security & Compliance<br>
                                    Duration: 2 hours • 6 modules<br>
                                    Annual requirement
                                </div>
                                <button class="enroll-btn">Enroll Now</button>
                            </div>

                            <!-- Available Course 4 -->
                            <div class="course-card" data-status="available" data-type="onsite">
                                <div class="course-header">
                                    <h3 class="course-title">Team Building & Collaboration</h3>
                                    <div class="course-badges">
                                        <span class="course-type onsite">Onsite</span>
                                    </div>
                                </div>
                                <div class="course-description">
                                    Leadership Development<br>
                                    Duration: 2 days • Outdoor activities<br>
                                    Location: Retreat Center
                                </div>
                                <button class="enroll-btn">Enroll Now</button>
                            </div>

                            <!-- Available Course 5 -->
                            <div class="course-card" data-status="available" data-type="online">
                                <div class="course-header">
                                    <h3 class="course-title">Digital Marketing Fundamentals</h3>
                                    <div class="course-badges">
                                        <span class="course-type online">Online</span>
                                    </div>
                                </div>
                                <div class="course-description">
                                    Marketing & Business<br>
                                    Duration: 4 weeks • 16 lessons<br>
                                    Instructor: Ms. Sarah Williams
                                </div>
                                <button class="enroll-btn">Enroll Now</button>
                            </div>

                            <!-- Available Course 6 -->
                            <div class="course-card" data-status="available" data-type="onsite required">
                                <div class="course-header">
                                    <h3 class="course-title">Emergency Response Training</h3>
                                    <div class="course-badges">
                                        <span class="course-type onsite">Onsite</span>
                                        <span class="course-type required">Required</span>
                                    </div>
                                </div>
                                <div class="course-description">
                                    Safety & Emergency<br>
                                    Duration: 1 day • 6 modules<br>
                                    Location: Training Center A
                                </div>
                                <button class="enroll-btn">Enroll Now</button>
                            </div>

                            <!-- Available Course 7 -->
                            <div class="course-card" data-status="available" data-type="online">
                                <div class="course-header">
                                    <h3 class="course-title">Financial Planning & Budgeting</h3>
                                    <div class="course-badges">
                                        <span class="course-type online">Online</span>
                                    </div>
                                </div>
                                <div class="course-description">
                                    Finance & Accounting<br>
                                    Duration: 3 weeks • 12 lessons<br>
                                    Instructor: Mr. David Brown
                                </div>
                                <button class="enroll-btn">Enroll Now</button>
                            </div>

                            <!-- Available Course 8 -->
                            <div class="course-card" data-status="available" data-type="online">
                                <div class="course-header">
                                    <h3 class="course-title">Creative Problem Solving</h3>
                                    <div class="course-badges">
                                        <span class="course-type online">Online</span>
                                    </div>
                                </div>
                                <div class="course-description">
                                    Innovation & Creativity<br>
                                    Duration: 2 weeks • 10 lessons<br>
                                    Instructor: Dr. Lisa Martinez
                                </div>
                                <button class="enroll-btn">Enroll Now</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Certificates Tab -->
                <div id="certificates-tab" class="tab-content">
                    <div class="card">
                        <div class="card-header">
                            <h3>All Certificates</h3>
                            <button class="upload-certificate-btn">
                                <i class="fas fa-upload"></i>
                                Upload Certificate
                            </button>
                        </div>
                        <p>Manage your training certificates and upload new certifications you've earned.</p>
                        
                        <div class="certificates-list">
                            <!-- Sample uploaded certificate -->
                            <div class="certificate-list-item uploaded">
                                <div class="certificate-list-info">
                                    <div class="certificate-list-icon">
                                        <i class="fas fa-certificate"></i>
                                    </div>
                                    <div class="certificate-list-details">
                                        <h4 class="certificate-list-title">Technical Skills Enhancement</h4>
                                        <div class="certificate-list-meta">
                                            <strong>Date Completed:</strong> March 15, 2025 • <strong>Topics:</strong> 12 modules • <strong>Score:</strong> 95%
                                        </div>
                                    </div>
                                </div>
                                <div class="certificate-list-actions">
                                    <div class="certificate-list-id">TSE-2025-001</div>
                                    <i class="fas fa-download certificate-download"></i>
                                </div>
                            </div>

                            <!-- Sample uploaded certificate 2 -->
                            <div class="certificate-list-item uploaded">
                                <div class="certificate-list-info">
                                    <div class="certificate-list-icon">
                                        <i class="fas fa-award"></i>
                                    </div>
                                    <div class="certificate-list-details">
                                        <h4 class="certificate-list-title">Leadership Development Program</h4>
                                        <div class="certificate-list-meta">
                                            <strong>Date Issued:</strong> February 28, 2025 • <strong>Lessons:</strong> 20 lessons • <strong>Duration:</strong> 5 weeks
                                        </div>
                                    </div>
                                </div>
                                <div class="certificate-list-actions">
                                    <div class="certificate-list-id">LDP-2025-045</div>
                                    <i class="fas fa-download certificate-download"></i>
                                </div>
                            </div>

                            <!-- Sample uploaded certificate 3 -->
                            <div class="certificate-list-item uploaded">
                                <div class="certificate-list-info">
                                    <div class="certificate-list-icon">
                                        <i class="fas fa-shield-alt"></i>
                                    </div>
                                    <div class="certificate-list-details">
                                        <h4 class="certificate-list-title">Safety and Compliance Training</h4>
                                        <div class="certificate-list-meta">
                                            <strong>Date Completed:</strong> January 20, 2025 • <strong>Modules:</strong> 8 modules • <strong>Valid Until:</strong> January 2026
                                        </div>
                                    </div>
                                </div>
                                <div class="certificate-list-actions">
                                    <div class="certificate-list-id">SCT-2025-012</div>
                                    <i class="fas fa-download certificate-download"></i>
                                </div>
                            </div>

                            <!-- Placeholder for new uploads -->
                            <div class="show-more-item">
                                <div>
                                    <i class="fas fa-plus-circle" style="font-size: 1.2rem; margin-right: 8px;"></i>
                                    Upload a new certificate
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Training Request Modal -->
    <div class="modal-overlay" id="trainingRequestModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Add a New Training Course Request</h2>
            </div>
            
            <form id="trainingRequestForm">
                <div class="form-group">
                    <label class="form-label">Select Suggested Training Course:</label>
                    <div class="dropdown-container" id="trainingDropdown">
                        <input 
                            type="text" 
                            class="dropdown-input" 
                            id="trainingCourseInput" 
                            placeholder="Search and select a training course..."
                            autocomplete="off"
                            required
                        >
                        <i class="fas fa-chevron-down dropdown-icon"></i>
                        <div class="dropdown-list" id="trainingDropdownList">
                            <div class="loading">Loading available trainings...</div>
                        </div>
                    </div>
                    <input type="hidden" id="selectedTrainingId" name="selectedTrainingId">
                </div>

                <div class="form-group">
                    <label class="form-label">Selected Training Course Focus Areas:</label>
                    <div class="skills-objectives-container empty" id="skillsObjectivesContainer">
                        <div class="section-title">
                            <i class="fas fa-bullseye"></i>
                            Objectives
                        </div>
                        <div class="tags-container" id="objectivesContainer"></div>
                        
                        <div class="section-title">
                            <i class="fas fa-cogs"></i>
                            Skills
                        </div>
                        <div class="tags-container" id="skillsContainer"></div>
                    </div>
                    <div id="noSelectionMessage" style="color: #64748b; font-style: italic; margin-top: 8px;">
                        Please select a training course to view its focus areas.
                    </div>
                </div>

                <div class="form-group">
                    <div class="date-inputs">
                        <div>
                            <label class="form-label">Set Start Date:</label>
                            <input type="date" class="form-input" id="startDate" required>
                        </div>
                        <div>
                            <label class="form-label">Set End Date:</label>
                            <input type="date" class="form-input" id="endDate" required>
                        </div>
                    </div>
                </div>

                <div class="confirmation-message">
                    Are you sure you want to add this training course record to your profile? Your line manager will be notified for approval. Please ensure that your selected training course matches your Individual Development Plan (IDP).
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="closeTrainingRequestModal()">Cancel</button>
                    <button type="submit" class="btn-primary" id="submitButton" disabled>Submit Request</button>
                </div>
            </form>
        </div>
    </div>

    <!-- JavaScript for tabs and interactions -->
    <script>
        // Sample course data for filtering
        const allCourses = [
            { id: 1, title: "Leadership Development Program", status: "in-progress", type: ["online"], progress: 75, lessons: "15/20 lessons" },
            { id: 2, title: "Safety and Compliance Training", status: "in-progress", type: ["onsite", "required"], progress: 60, lessons: "5/8 modules" },
            { id: 3, title: "Technical Skills Enhancement", status: "completed", type: ["online", "required"], progress: 100, lessons: "12/12 lessons" },
            { id: 4, title: "Project Management Fundamentals", status: "overdue", type: ["online", "required"], progress: 25, lessons: "4/16 lessons" },
            { id: 5, title: "Advanced Data Analytics", status: "available", type: ["online"], progress: 0, lessons: "Not started" },
            { id: 6, title: "Communication Excellence Workshop", status: "available", type: ["onsite"], progress: 0, lessons: "Not started" },
            { id: 7, title: "Cybersecurity Awareness", status: "available", type: ["online", "required"], progress: 0, lessons: "Not started" },
            { id: 8, title: "Team Building & Collaboration", status: "available", type: ["onsite"], progress: 0, lessons: "Not started" }
        ];

        let selectedTraining = null;
        let filteredTrainings = [];


        document.addEventListener('DOMContentLoaded', () => {
            // Tab functionality
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');

            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    // Remove active class from all buttons and contents
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));

                    // Add active class to clicked button
                    button.classList.add('active');

                    // Show corresponding content
                    const tabId = button.getAttribute('data-tab');
                    document.getElementById(tabId).classList.add('active');
                });
            });

            // View toggle functionality
            document.querySelectorAll('.view-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                });
            });

            // Progress category click to scroll to section
            document.querySelectorAll('.progress-category').forEach(category => {
                category.addEventListener('click', function() {
                    const filterType = this.getAttribute('data-filter');
                    const sectionId = filterType + '-section';
                    scrollToSection(sectionId);
                });
            });

            // Upload certificate functionality
            const uploadBtn = document.querySelector('.upload-certificate-btn');
            if (uploadBtn) {
                uploadBtn.addEventListener('click', function() {
                    // Create file input
                    const fileInput = document.createElement('input');
                    fileInput.type = 'file';
                    fileInput.accept = '.pdf,.jpg,.jpeg,.png';
                    fileInput.style.display = 'none';
                    
                    fileInput.addEventListener('change', function() {
                        if (this.files.length > 0) {
                            alert(`Certificate "${this.files[0].name}" selected for upload.`);
                            // Here you would typically handle the file upload
                        }
                    });
                    
                    document.body.appendChild(fileInput);
                    fileInput.click();
                    document.body.removeChild(fileInput);
                });
            }
        });

        

        // Filter dropdown functionality
        function toggleFilterDropdown() {
            const dropdown = document.getElementById('filter-dropdown');
            dropdown.classList.toggle('open');
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const dropdown = document.getElementById('filter-dropdown');
            if (!dropdown.contains(event.target)) {
                dropdown.classList.remove('open');
            }
        });

        // Update filters based on checkboxes
        function updateFilters() {
            const activeFilters = [];
            const checkboxes = document.querySelectorAll('#filter-dropdown input[type="checkbox"]:checked');
            
            checkboxes.forEach(checkbox => {
                activeFilters.push(checkbox.value);
            });
            
            updateActiveFiltersDisplay(activeFilters);
            filterCourses(activeFilters);
        }

        // Display active filters
        function updateActiveFiltersDisplay(filters) {
            const activeFiltersContainer = document.getElementById('active-filters');
            activeFiltersContainer.innerHTML = '';
            
            filters.forEach(filter => {
                const filterTag = document.createElement('div');
                filterTag.className = 'filter-tag';
                filterTag.innerHTML = `
                    ${filter.charAt(0).toUpperCase() + filter.slice(1)}
                    <span class="remove-filter" onclick="removeFilter('${filter}')">×</span>
                `;
                activeFiltersContainer.appendChild(filterTag);
            });
        }

        // Remove individual filter
        function removeFilter(filterToRemove) {
            const checkbox = document.getElementById(`filter-${filterToRemove}`);
            if (checkbox) {
                checkbox.checked = false;
                updateFilters();
            }
        }

        // Filter courses based on selected filters
        function filterCourses(activeFilters) {
            const courseCards = document.querySelectorAll('.course-card');
            
            courseCards.forEach(card => {
                if (activeFilters.length === 0) {
                    card.style.display = 'block';
                } else {
                    const cardTypes = card.getAttribute('data-type') || '';
                    const hasMatchingFilter = activeFilters.some(filter => 
                        cardTypes.includes(filter)
                    );
                    
                    card.style.display = hasMatchingFilter ? 'block' : 'none';
                }
            });
        }

        // Scroll to section functionality
        function scrollToSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                section.scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'start'
                });
                
                // Add a subtle highlight effect
                section.style.backgroundColor = '#f0fdff';
                setTimeout(() => {
                    section.style.backgroundColor = '';
                }, 2000);
            }
        }


        document.addEventListener('DOMContentLoaded', function() {
            initializeTrainingDropdown();
            setupFormValidation();
        });

        function initializeTrainingDropdown() {
            const dropdown = document.getElementById('trainingDropdown');
            const input = document.getElementById('trainingCourseInput');
            const dropdownList = document.getElementById('trainingDropdownList');

            // Load trainings when modal opens
            loadTrainings();

            // Handle input events
            input.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                filterTrainings(searchTerm);
                dropdown.classList.add('open');
            });

            input.addEventListener('focus', function() {
                dropdown.classList.add('open');
                if (filteredTrainings.length === 0) {
                    loadTrainings();
                }
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', function(event) {
                if (!dropdown.contains(event.target)) {
                    dropdown.classList.remove('open');
                }
            });
        }

        function loadTrainings() {
            // Simulate API call - replace with actual implementation
            setTimeout(() => {
                filteredTrainings = [...mockTrainings];
                renderTrainingOptions();
            }, 500);
        }

        function filterTrainings(searchTerm) {
            if (!searchTerm) {
                // Show all trainings when no search term
                renderTrainingOptions();
            } else {
                // Filter trainings based on search term
                const filtered = filteredTrainings.filter(training => 
                    training.trainingName.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    training.trainingDesc.toLowerCase().includes(searchTerm.toLowerCase())
                );
                
                // Temporarily store original list and show filtered results
                const originalList = filteredTrainings;
                filteredTrainings = filtered;
                renderTrainingOptions();
                filteredTrainings = originalList; // Restore original list
            }
        }

        function renderTrainingOptions() {
            const dropdownList = document.getElementById('trainingDropdownList');
            
            if (filteredTrainings.length === 0) {
                dropdownList.innerHTML = '<div class="no-results">No trainings found</div>';
                return;
            }

            const optionsHTML = filteredTrainings.map(training => `
                <div class="dropdown-item" onclick="selectTraining(${training.trainingId})">
                    <div class="dropdown-item-title">${training.trainingName}</div>
                    <div class="dropdown-item-meta">
                        ${training.isOnlineArrangement ? 'Online' : 'Onsite'} • 
                        ${training.totalDuration}h • 
                        $${training.cost.toFixed(2)}
                    </div>
                </div>
            `).join('');

            dropdownList.innerHTML = optionsHTML;
        }

        function selectTraining(trainingId) {
            selectedTraining = mockTrainings.find(t => t.trainingId === trainingId);
            
            if (selectedTraining) {
                // Update input field
                document.getElementById('trainingCourseInput').value = selectedTraining.trainingName;
                document.getElementById('selectedTrainingId').value = selectedTraining.trainingId;
                
                // Close dropdown
                document.getElementById('trainingDropdown').classList.remove('open');
                
                // Display skills and objectives
                displaySkillsAndObjectives(selectedTraining);
                
                // Enable submit button
                validateForm();
            }
        }

        function displaySkillsAndObjectives(training) {
            const container = document.getElementById('skillsObjectivesContainer');
            const objectivesContainer = document.getElementById('objectivesContainer');
            const skillsContainer = document.getElementById('skillsContainer');
            const noSelectionMessage = document.getElementById('noSelectionMessage');

            // Clear existing content
            objectivesContainer.innerHTML = '';
            skillsContainer.innerHTML = '';

            // Add objectives
            training.objectives.forEach(objective => {
                const tag = document.createElement('div');
                tag.className = 'tag objective';
                tag.innerHTML = `<i class="fas fa-bullseye" style="margin-right: 4px;"></i>${objective.objectiveDescrpt}`;
                objectivesContainer.appendChild(tag);
            });

            // Add skills
            training.skills.forEach(skill => {
                const tag = document.createElement('div');
                tag.className = 'tag skill';
                tag.innerHTML = `<i class="fas fa-cogs" style="margin-right: 4px;"></i>${skill.jobReqSkillName}`;
                skillsContainer.appendChild(tag);
            });

            // Show container and hide message
            container.classList.remove('empty');
            noSelectionMessage.style.display = 'none';
        }

        function setupFormValidation() {
            const form = document.getElementById('trainingRequestForm');
            const inputs = form.querySelectorAll('input[required]');
            
            inputs.forEach(input => {
                input.addEventListener('input', validateForm);
                input.addEventListener('change', validateForm);
            });

            form.addEventListener('submit', handleFormSubmit);
        }

        function validateForm() {
            const trainingSelected = document.getElementById('selectedTrainingId').value;
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            const submitButton = document.getElementById('submitButton');

            const isValid = trainingSelected && startDate && endDate && new Date(endDate) > new Date(startDate);
            
            submitButton.disabled = !isValid;
        }

        function handleFormSubmit(e) {
            e.preventDefault();
            
            if (!selectedTraining) {
                alert('Please select a training course first.');
                return;
            }

            const formData = {
                trainingId: selectedTraining.trainingId,
                trainingName: selectedTraining.trainingName,
                startDate: document.getElementById('startDate').value,
                endDate: document.getElementById('endDate').value,
                objectives: selectedTraining.objectives,
                skills: selectedTraining.skills
            };

            console.log('Training Request Data:', formData);
            
            // Here you would make the API call to save the data
            submitTrainingRequest(formData);
        }

        function submitTrainingRequest(formData) {
            // Simulate API call
            const submitButton = document.getElementById('submitButton');
            submitButton.disabled = true;
            submitButton.textContent = 'Submitting...';

            // Replace this with actual API call
            setTimeout(() => {
                alert('Training request submitted successfully! Your line manager will be notified for approval.');
                closeTrainingRequestModal();
                
                // Reset button
                submitButton.disabled = false;
                submitButton.textContent = 'Submit Request';
            }, 1500);
        }

        function openTrainingRequestModal() {
    document.getElementById('trainingRequestModal').style.display = 'flex';
    // Set minimum date to today
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('startDate').min = today;
    document.getElementById('endDate').min = today;
}

function closeTrainingRequestModal() {
    document.getElementById('trainingRequestModal').style.display = 'none';
    resetModal();
}
        function resetModal() {
            // Reset form
            document.getElementById('trainingRequestForm').reset();
            document.getElementById('selectedTrainingId').value = '';
            
            // Reset selected training
            selectedTraining = null;
            
            // Hide skills and objectives
            const container = document.getElementById('skillsObjectivesContainer');
            const noSelectionMessage = document.getElementById('noSelectionMessage');
            container.classList.add('empty');
            noSelectionMessage.style.display = 'block';
            
            // Close dropdown
            document.getElementById('trainingDropdown').classList.remove('open');
            
            // Disable submit button
            document.getElementById('submitButton').disabled = true;
        }

        // API Functions - Simplified for Modal Only
        async function fetchTrainingsDropdown() {
            try {
                const response = await fetch('/linemanager/trainings/dropdown', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    credentials: 'include' // Include cookies for session
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const result = await response.json();
                return result.success ? result.data : [];
            } catch (error) {
                console.error('Error fetching trainings dropdown:', error);
                return [];
            }
        }

        async function fetchTrainingDetails(trainingId) {
            try {
                const response = await fetch(`/linemanager/trainings/${trainingId}/details`, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    credentials: 'include' // Include cookies for session
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const result = await response.json();
                return result.success ? result.data : { objectives: [], skills: [] };
            } catch (error) {
                console.error('Error fetching training details:', error);
                return { objectives: [], skills: [] };
            }
        }

        // Updated loadTrainings function - no need for job/dept params
        function loadTrainings() {
            // Show loading state
            const dropdownList = document.getElementById('trainingDropdownList');
            dropdownList.innerHTML = '<div class="loading"><i class="fas fa-spinner fa-spin"></i> Loading available trainings...</div>';

            // Fetch trainings from API (uses session data automatically)
            fetchTrainingsDropdown()
                .then(trainings => {
                    filteredTrainings = trainings;
                    if (trainings.length === 0) {
                        renderNoTrainings('No trainings available for your job position.');
                    } else {
                        renderTrainingOptions();
                    }
                })
                .catch(error => {
                    console.error('Failed to load trainings:', error);
                    renderNoTrainings('Failed to load trainings. Please try again.');
                });
        }

        function renderNoTrainings(message) {
            const dropdownList = document.getElementById('trainingDropdownList');
            dropdownList.innerHTML = `<div class="no-results"><i class="fas fa-info-circle"></i> ${message}</div>`;
        }

        // Updated selectTraining function
        async function selectTraining(trainingId) {
            selectedTraining = filteredTrainings.find(t => t.trainingId === trainingId);
            
            if (!selectedTraining) {
                console.error('Training not found in filtered list');
                return;
            }

            // Update input field
            document.getElementById('trainingCourseInput').value = selectedTraining.trainingName;
            document.getElementById('selectedTrainingId').value = selectedTraining.trainingId;
            
            // Close dropdown
            document.getElementById('trainingDropdown').classList.remove('open');
            
            // Show loading state for skills and objectives
            const container = document.getElementById('skillsObjectivesContainer');
            const objectivesContainer = document.getElementById('objectivesContainer');
            const skillsContainer = document.getElementById('skillsContainer');
            
            objectivesContainer.innerHTML = '<div style="color: #64748b; font-style: italic; display: flex; align-items: center; gap: 8px;"><i class="fas fa-spinner fa-spin"></i>Loading objectives...</div>';
            skillsContainer.innerHTML = '<div style="color: #64748b; font-style: italic; display: flex; align-items: center; gap: 8px;"><i class="fas fa-spinner fa-spin"></i>Loading skills...</div>';
            container.classList.remove('empty');
            document.getElementById('noSelectionMessage').style.display = 'none';

            try {
                // Fetch skills and objectives from API
                const trainingDetails = await fetchTrainingDetails(selectedTraining.trainingId);
                
                // Update selectedTraining with fetched data
                selectedTraining.objectives = trainingDetails.objectives || [];
                selectedTraining.skills = trainingDetails.skills || [];
                
                // Display skills and objectives
                displaySkillsAndObjectives(selectedTraining);
                
                // Enable submit button
                validateForm();
            } catch (error) {
                console.error('Failed to load training details:', error);
                objectivesContainer.innerHTML = '<div style="color: #ef4444; font-style: italic; display: flex; align-items: center; gap: 8px;"><i class="fas fa-exclamation-triangle"></i>Failed to load objectives</div>';
                skillsContainer.innerHTML = '<div style="color: #ef4444; font-style: italic; display: flex; align-items: center; gap: 8px;"><i class="fas fa-exclamation-triangle"></i>Failed to load skills</div>';
            }
        }

        // Enhanced displaySkillsAndObjectives function
        function displaySkillsAndObjectives(training) {
            const container = document.getElementById('skillsObjectivesContainer');
            const objectivesContainer = document.getElementById('objectivesContainer');
            const skillsContainer = document.getElementById('skillsContainer');
            const noSelectionMessage = document.getElementById('noSelectionMessage');

            // Clear existing content
            objectivesContainer.innerHTML = '';
            skillsContainer.innerHTML = '';

            // Check if we have any data
            const hasObjectives = training.objectives && training.objectives.length > 0;
            const hasSkills = training.skills && training.skills.length > 0;

            if (!hasObjectives && !hasSkills) {
                objectivesContainer.innerHTML = '<div style="color: #94a3b8; font-style: italic;">No specific objectives defined</div>';
                skillsContainer.innerHTML = '<div style="color: #94a3b8; font-style: italic;">No specific skills defined</div>';
            } else {
                // Add objectives
                if (hasObjectives) {
                    training.objectives.forEach(objective => {
                        const tag = document.createElement('div');
                        tag.className = 'tag objective';
                        tag.innerHTML = `<i class="fas fa-bullseye" style="margin-right: 4px;"></i>${objective.objectiveDescrpt}`;
                        objectivesContainer.appendChild(tag);
                    });
                } else {
                    objectivesContainer.innerHTML = '<div style="color: #94a3b8; font-style: italic;">No specific objectives defined</div>';
                }

                // Add skills
                if (hasSkills) {
                    training.skills.forEach(skill => {
                        const tag = document.createElement('div');
                        tag.className = 'tag skill';
                        tag.innerHTML = `<i class="fas fa-cogs" style="margin-right: 4px;"></i>${skill.jobReqSkillName} <span style="opacity: 0.7; font-size: 10px;">(${skill.jobReqSkillType})</span>`;
                        skillsContainer.appendChild(tag);
                    });
                } else {
                    skillsContainer.innerHTML = '<div style="color: #94a3b8; font-style: italic;">No specific skills defined</div>';
                }
            }

            // Show container and hide message
            container.classList.remove('empty');
            noSelectionMessage.style.display = 'none';
        }

        // Updated submitTrainingRequest function
        async function submitTrainingRequest(formData) {
            const submitButton = document.getElementById('submitButton');
            const originalText = submitButton.textContent;
            
            submitButton.disabled = true;
            submitButton.innerHTML = '<i class="fas fa-spinner fa-spin" style="margin-right: 8px;"></i>Submitting...';

            try {
                const response = await fetch('/linemanager/training-requests', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    credentials: 'include', // Include cookies for session
                    body: JSON.stringify({
                        trainingId: formData.trainingId,
                        startDate: formData.startDate,
                        endDate: formData.endDate
                    })
                });

                const result = await response.json();
                
                if (response.ok && result.success) {
                    // Success notification with more details
                    const trainingName = selectedTraining ? selectedTraining.trainingName : 'Selected training';
                    alert(`✅ Training request submitted successfully!\n\nTraining: ${trainingName}\nStart Date: ${formData.startDate}\nEnd Date: ${formData.endDate}\n\nYour line manager will be notified for approval.`);
                    
                    closeTrainingRequestModal();
                    
                    // Optionally trigger a refresh of the training progress section
                    // if (typeof refreshTrainingProgress === 'function') {
                    //     refreshTrainingProgress();
                    // }
                } else {
                    throw new Error(result.message || 'Failed to submit training request');
                }
                
            } catch (error) {
                console.error('Error submitting training request:', error);
                
                // More user-friendly error messages
                let errorMessage = 'Failed to submit training request. ';
                if (error.message.includes('already have an active')) {
                    errorMessage += 'You already have an active training request for this course.';
                } else if (error.message.includes('not authenticated')) {
                    errorMessage += 'Please log in again and try again.';
                } else if (error.message.includes('not found')) {
                    errorMessage += 'The selected training is no longer available.';
                } else {
                    errorMessage += error.message || 'Please try again later.';
                }
                
                alert('❌ ' + errorMessage);
            } finally {
                // Reset button
                submitButton.disabled = false;
                submitButton.innerHTML = originalText;
            }
        }

        // Updated submitTrainingRequest function with better error handling
        async function submitTrainingRequest(formData) {
            const submitButton = document.getElementById('submitButton');
            const originalText = submitButton.textContent;
            
            submitButton.disabled = true;
            submitButton.innerHTML = '<i class="fas fa-spinner fa-spin" style="margin-right: 8px;"></i>Submitting...';

            try {
                const response = await fetch('/linemanager/training-requests', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    credentials: 'include', // Include cookies for session
                    body: JSON.stringify({
                        trainingId: formData.trainingId,
                        startDate: formData.startDate,
                        endDate: formData.endDate
                    })
                });

                const result = await response.json();
                
                if (response.ok && result.success) {
                    // Success notification with more details
                    const trainingName = selectedTraining ? selectedTraining.trainingName : 'Selected training';
                    alert(`✅ Training request submitted successfully!\n\nTraining: ${trainingName}\nStart Date: ${formData.startDate}\nEnd Date: ${formData.endDate}\n\nYour line manager will be notified for approval.`);
                    
                    closeTrainingRequestModal();
                    
                    // Optionally trigger a refresh of the training progress section
                    // if (typeof refreshTrainingProgress === 'function') {
                    //     refreshTrainingProgress();
                    // }
                } else {
                    throw new Error(result.message || 'Failed to submit training request');
                }
                
            } catch (error) {
                console.error('Error submitting training request:', error);
                
                // More user-friendly error messages
                let errorMessage = 'Failed to submit training request. ';
                if (error.message.includes('already have an active')) {
                    errorMessage += 'You already have an active training request for this course.';
                } else if (error.message.includes('not authenticated')) {
                    errorMessage += 'Please log in again and try again.';
                } else if (error.message.includes('not found')) {
                    errorMessage += 'The selected training is no longer available.';
                } else {
                    errorMessage += error.message || 'Please try again later.';
                }
                
                alert('❌ ' + errorMessage);
            } finally {
                // Reset button
                submitButton.disabled = false;
                submitButton.innerHTML = originalText;
            }
        }

        // Helper functions - these should be implemented based on your user session/authentication
        function getCurrentUserId() {
            // Since you're using session-based auth, this might be available in a global variable
            // or you might need to make an API call to get current user info
            // Example: return window.currentUser?.userId;
            return window.userSession?.userId || null; // Adjust based on your implementation
        }

        function getUserJobId() {
            // Get from session or user profile
            return window.userSession?.jobId || null; // Adjust based on your implementation
        }

        function getUserDeptId() {
            // Get from session or user profile  
            return window.userSession?.departmentId || null; // Adjust based on your implementation
        }

         function renderTrainingOptions() {
            const dropdownList = document.getElementById('trainingDropdownList');
            
            if (filteredTrainings.length === 0) {
                dropdownList.innerHTML = '<div class="no-results"><i class="fas fa-search"></i> No trainings found matching your search</div>';
                return;
            }

            const optionsHTML = filteredTrainings.map(training => `
                <div class="dropdown-item" onclick="selectTraining(${training.trainingId})">
                    <div class="dropdown-item-title">${training.trainingName}</div>
                    <div class="dropdown-item-meta">
                        <i class="fas fa-${training.isOnlineArrangement ? 'laptop' : 'map-marker-alt'}"></i>
                        ${training.isOnlineArrangement ? 'Online' : 'Onsite'} • 
                        <i class="fas fa-clock"></i>
                        ${training.totalDuration}h • 
                        <i class="fas fa-dollar-sign"></i>
                        ${training.cost ? training.cost.toFixed(2) : 'Free'}
                    </div>
                </div>
            `).join('');

            dropdownList.innerHTML = optionsHTML;
        }

        // Training request modal functionality
        function openTrainingRequestModal() {
            document.getElementById('trainingRequestModal').classList.add('show');
        }

        function closeTrainingRequestModal() {
            document.getElementById('trainingRequestModal').classList.remove('show');
            // Reset form
            document.getElementById('trainingRequestForm').reset();
            // Reset checkboxes
            document.querySelectorAll('.checkbox-item').forEach(item => {
                item.classList.remove('selected');
            });
        }

        function toggleCheckbox(checkboxId) {
            const checkbox = document.getElementById(checkboxId);
            const checkboxItem = checkbox.closest('.checkbox-item');
            
            checkbox.checked = !checkbox.checked;
            checkboxItem.classList.toggle('selected', checkbox.checked);
        }

        // Handle form submission
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('trainingRequestForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const formData = {
                    trainingCourse: document.getElementById('trainingCourse').value,
                    objectives: Array.from(document.querySelectorAll('#objectiveAreas input:checked')).map(cb => cb.value),
                    skills: Array.from(document.querySelectorAll('#skillAreas input:checked')).map(cb => cb.value),
                    startDate: document.getElementById('startDate').value,
                    endDate: document.getElementById('endDate').value
                };
                
                console.log('Training Request Submitted:', formData);
                alert('Training request submitted successfully! Your line manager will be notified for approval.');
                closeTrainingRequestModal();
            });
        });

        // Close modal when clicking outside
        document.addEventListener('click', function(event) {
            const modal = document.getElementById('trainingRequestModal');
            if (event.target === modal) {
                closeTrainingRequestModal();
            }
        });
    </script>
</body>
</html>