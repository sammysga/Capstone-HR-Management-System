<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Questionnaires</title>
    <link rel="stylesheet" href="/path/to/your/css/styles.css"> <!-- Update with actual CSS path -->
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</head>

<style>
    .container {
        max-width: 800px;
        margin: auto;
        padding: 20px;
        font-family: Arial, sans-serif;
    }

    .employee-info {
        margin-bottom: 20px;
        padding: 15px;
        background-color: #e9f5ff;
        border-radius: 8px;
        border: 1px solid #cce7ff;
    }

    .questionnaires-list {
        margin-top: 20px;
        overflow-y: auto;
        max-height: 70vh;
    }

    .questionnaire-item {
        border: 1px solid #ccc;
        padding: 15px;
        margin-bottom: 15px;
        border-radius: 8px;
        background-color: #f9f9f9;
    }

    .star-rating i {
        font-size: 24px;
        cursor: pointer;
        color: #ddd;
    }

    .star-rating i.selected {
        color: gold;
    }

    textarea {
        width: 100%;
        height: 80px;
        margin-top: 10px;
        margin-bottom: 10px;
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 4px;
    }

    ul {
        padding-left: 20px;
        margin-bottom: 10px;
    }

    ul li {
        margin-bottom: 5px;
    }
</style>

<body>
    <div class="container">
        <header>
            <h1>Questionnaires for <%= userName %></h1>
            <p>Below are all the questionnaires assigned to you. Please provide your feedback as required.</p>
        </header>

        <!-- Employee Details -->
        <div class="employee-info">
            <div><strong>Employee Name:</strong> <%= user.lastName %>, <%= user.firstName %></div>
            <div><strong>Position:</strong> <%= user.jobTitle %></div>
            <div><strong>Company:</strong> Prime Infrastructure</div>
            <div><strong>Department:</strong> <%= user.departmentName %></div>
        </div>

        <!-- Scrollable Questionnaires -->
        <div class="questionnaires-list">
            <% if (questionnaires && questionnaires.length > 0) { %>
                <% questionnaires.forEach(questionnaire => { %>
                    <div class="questionnaire-item">
                        <h2>Objective: <%= questionnaire.objectiveDescrpt %></h2>
                        <p><strong>KPI:</strong> <%= questionnaire.objectiveKPI %></p>
                        <p><strong>Target:</strong> <%= questionnaire.objectiveTarget %></p>
                        <p><strong>Weight:</strong> <%= (questionnaire.objectiveAssignedWeight * 100).toFixed(1) %>%</p>
                        
                        <!-- Hard Skills -->
                        <div>
                            <label><strong>Hard Skills:</strong></label>
                            <ul>
                                <% questionnaire.hardSkills.forEach(skill => { %>
                                    <li><%= skill %></li>
                                <% }); %>
                            </ul>
                            <label for="hardSkillFeedback_<%= questionnaire.objectiveId %>">
                                Feedback on Hard Skills:
                            </label>
                            <textarea id="hardSkillFeedback_<%= questionnaire.objectiveId %>" 
                                      placeholder="Provide feedback on hard skills"></textarea>
                        </div>

                        <!-- Soft Skills -->
                        <div>
                            <label><strong>Soft Skills:</strong></label>
                            <ul>
                                <% questionnaire.softSkills.forEach(skill => { %>
                                    <li><%= skill %></li>
                                <% }); %>
                            </ul>
                            <label for="softSkillFeedback_<%= questionnaire.objectiveId %>">
                                Feedback on Soft Skills:
                            </label>
                            <textarea id="softSkillFeedback_<%= questionnaire.objectiveId %>" 
                                      placeholder="Provide feedback on soft skills"></textarea>
                        </div>

                        <!-- Qualitative Feedback -->
                        <div>
                            <label for="qualitativeInput_<%= questionnaire.objectiveId %>">
                                <strong>Qualitative Feedback:</strong>
                            </label>
                            <textarea id="qualitativeInput_<%= questionnaire.objectiveId %>" 
                                      placeholder="Enter your feedback here"></textarea>
                        </div>

                        <!-- Quantitative Feedback -->
                        <div>
                            <label><strong>Quantitative Rating:</strong></label>
                            <div id="starRating_<%= questionnaire.objectiveId %>" class="star-rating" data-rating="0">
                                <% for (let i = 1; i <= 5; i++) { %>
                                    <i class="fa-solid fa-star" data-value="<%= i %>"></i>
                                <% } %>
                            </div>
                        </div>
                    </div>
                <% }); %>
            <% } else { %>
                <p>No questionnaires available at this time.</p>
            <% } %>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            // Add event listeners to star ratings
            document.querySelectorAll('.star-rating').forEach(starRatingContainer => {
                const stars = starRatingContainer.querySelectorAll('.fa-star');

                stars.forEach(star => {
                    star.addEventListener('click', function () {
                        const rating = this.getAttribute('data-value');
                        const container = starRatingContainer;
                        container.setAttribute('data-rating', rating);

                        // Update star display
                        stars.forEach(s => {
                            if (parseInt(s.getAttribute('data-value')) <= rating) {
                                s.classList.add('selected');
                            } else {
                                s.classList.remove('selected');
                            }
                        });
                    });
                });
            });
        });
    </script>
</body>
</html>
